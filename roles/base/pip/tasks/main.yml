- name: install wget package
  apt: >
    name=wget
    state=present

- name: download directory
  file: >
    path=/var/cache/ansible/base/pip
    state=directory
    mode=0644
    owner=root
    group=root

- name: download setuptools
  get_url: >
    url={{ pip_setuptools_url }}
    sha256sum={{ pip_setuptools_sha256sum }}
    dest=/var/cache/ansible/base/pip/setuptools-{{ pip_setuptools_version }}.tar.gz
    mode=0644
    owner=root
    group=root

- name: untar setuptools
  command: >
    tar xfz /var/cache/ansible/base/pip/setuptools-{{ pip_setuptools_version }}.tar.gz
    chdir=/var/cache/ansible/base/pip
    creates=/var/cache/ansible/base/pip/setuptools-{{ pip_setuptools_version }}

- name: install setuptools
  command: >
    python /var/cache/ansible/base/pip/setuptools-{{ pip_setuptools_version }}/setup.py install
    creates=/usr/local/bin/easy_install

- name: download pip boostrap file
  get_url: >
    url=https://raw.github.com/pypa/pip/master/contrib/get-pip.py
    dest=/var/cache/ansible/base/pip/get-pip.py
    mode=0644
    owner=root
    group=root

- name: install pip
  command: >
    python /var/cache/ansible/base/pip/get-pip.py
    creates=/usr/local/bin/pip

- name: check setuptools version
  pip: >
    name=setuptools
    state=present
    version={{ pip_setuptools_version }}

- name: check pip version
  pip: >
    name=pip
    state=present
    version={{ pip_version }}
