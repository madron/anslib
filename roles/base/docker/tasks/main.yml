- name: os specific variables
  include_vars: "{{ ansible_lsb.id|lower() }}_{{ ansible_lsb.codename }}.yml"
  tags:
    - docker


- include: debian.yml
  when: ansible_os_family == 'Debian'
  tags:
    - docker


- name: fix ubuntu trusty pip installation
  command: easy_install -U pip
  args:
    creates: /usr/local/bin/pip
  when: ansible_lsb.id == 'Ubuntu' and ansible_lsb.codename == 'trusty'
  tags:
    - docker


- name: docker-py
  pip:
    name: docker-py
    state: latest
  tags:
    - docker


- name: accounts
  command: docker login --username {{ item.value.username }} --password {{ item.value.password }} --email {{ item.value.email|default('no') }} {{ item.key }}
  with_dict: docker_accounts
  tags:
    - docker
    - docker-accounts
