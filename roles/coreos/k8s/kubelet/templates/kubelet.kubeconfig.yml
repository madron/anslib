apiVersion: v1
clusters:
  - cluster:
      certificate-authority: /etc/kubernetes/ssl/ca.crt
      server: https://{{ k8s_api_ip }}:{{ k8s_api_port }}
    name: {{ k8s_cluster_name }}
contexts:
  - context:
      cluster: {{ k8s_cluster_name }}
      user: system:node:{{ inventory_hostname }}
    name: {{ k8s_cluster_name }}
current-context: {{ k8s_cluster_name }}
kind: Config
preferences: {}
users:
- name: system:node:{{ inventory_hostname }}
  user:
    client-certificate: /etc/kubernetes/ssl/node-{{ inventory_hostname }}.crt
    client-key: /etc/kubernetes/ssl/node-{{ inventory_hostname }}.key
